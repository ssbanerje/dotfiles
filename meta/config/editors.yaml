# -------------- Install software
- ifubuntu:
    - shell:
        - "curl -fsSL https://deb.nodesource.com/setup_16.x | sudo bash -"
        - "curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -"
        - "echo 'deb https://dl.yarnpkg.com/debian/ stable main' | sudo tee /etc/apt/sources.list.d/yarn.list"
        - "sudo apt update"

    - apt:
        - git
        - neovim
        - vim-nox
        - global
        - exuberant-ctags
        - libclang-dev
        - clangd
        - nodejs:
            shell_after:
              - "sudo npm -g install npm@latest"
        - yarn
        - build-essential

- ifarch:
    - pacman:
        - neovim
        - vim
        - global
        - ctags
        - clang
        - nodejs
        - yarn
        - base-devel

- ifmacos:
    - brew:
        - git
        - neovim
        - global
        - ctags
        - node
        - npm
        - yarn

- pip:
    file: meta/config/requirements.txt
    user: true
    stdout: false
    stderr: true

- yarn:
    stdout: false
    stderr: true
    packages:
      - neovim
      - remark
      - remark-cli
      - remark-stringify
      - remark-frontmatter
      - wcwidth
      - prettier
      - vscode-html-languageserver-bin
      - bash-language-server
      - dockerfile-language-server-nodejs

- shell:
  - 'curl --proto "=https" --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y --no-modify-path'
  - '. ~/.cargo/env && rustup toolchain install nightly --allow-downgrade --profile minimal --component clippy'
  - '. ~/.cargo/env && rustup component add rls rust-analysis rust-src'
  - 'mkdir -p ~/.local/share/nvim/shada/ && touch ~/.local/share/nvim/shada/main.shada'

# -------------- Link configuration
- link:
    ~/.ideavimrc: editors/ideavimrc
    ~/.editorconfig: editors/editorconfig
    ~/.SpaceVim.d: editors/SpaceVim.d

- shell:
    - ["curl -sLf https://spacevim.org/install.sh | bash", "Installing SpaceVim"]
